From 039875c74e384264d0f060cf4838e80ad027df88 Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@gnome.org>
Date: Fri, 27 Apr 2012 13:37:36 +0200
Subject: [PATCH 2/2] disable wacom on non Linux platforms.

wacom requires udev which is only available on Linux.

https://bugzilla.gnome.org/show_bug.cgi?id=674935
---
 configure.ac |   19 +++++++++++++------
 1 file changed, 13 insertions(+), 6 deletions(-)

Index: gnome-settings-daemon-3.4.2/configure.ac
===================================================================
--- gnome-settings-daemon-3.4.2.orig/configure.ac	2012-05-19 02:59:57.118485100 +0200
+++ gnome-settings-daemon-3.4.2/configure.ac	2012-05-19 03:00:01.206484961 +0200
@@ -215,15 +215,22 @@
 PKG_CHECK_MODULES(COLOR, [colord >= 0.1.9 gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED_VERSION libcanberra-gtk3])
 
 dnl ---------------------------------------------------------------------------
-dnl - wacom (disabled for s390/s390x)
+dnl - wacom (disabled for s390/s390x and non Linux platforms)
 dnl ---------------------------------------------------------------------------
 
-if test "$host_cpu" = s390 -o "$host_cpu" = s390x; then
+case $host_os in
+  linux*)
+    if test "$host_cpu" = s390 -o "$host_cpu" = s390x; then
+      have_wacom=no
+    else
+      PKG_CHECK_MODULES(WACOM, [libwacom >= $LIBWACOM_REQUIRED_VERSION x11 xi xtst $GUDEV_PKG gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED_VERSION xorg-wacom])
+      have_wacom=yes
+    fi
+    ;;
+  *)
     have_wacom=no
-else
-    PKG_CHECK_MODULES(WACOM, [libwacom >= $LIBWACOM_REQUIRED_VERSION x11 xi xtst $GUDEV_PKG gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED_VERSION xorg-wacom])
-    have_wacom=yes
-fi
+    ;;
+esac
 AM_CONDITIONAL(HAVE_WACOM, test x$have_wacom = xyes)
 
 dnl ==============================================
